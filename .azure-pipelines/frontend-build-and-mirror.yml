trigger:  branches:    include: [ main ]pool:  name: Localvariables:  NODE_VERSION: '18.x'  WORKING_DIR: '.'  OUTPUT_DIR: 'build'        # <-- bytt til 'dist' eller 'lib' hvis UI-bibliotekstages:- stage: Build  jobs:  - job: build_frontend    steps:    - task: NodeTool@0      inputs: { versionSpec: '$(NODE_VERSION)' }      displayName: 'Use Node $(NODE_VERSION)'    - pwsh: |        Set-Location "$(WORKING_DIR)"        npm ci        if (Test-Path package.json) {          $pkg = Get-Content package.json | ConvertFrom-Json          if ($pkg.scripts.build) { npm run build } else { Write-Host "No build script, skipping" }        }        # Hjelpelogg: vis hva som ble bygd        Write-Host "Listing $(OUTPUT_DIR) if it exists:"        if (Test-Path "$(OUTPUT_DIR)") { Get-ChildItem -Recurse "$(OUTPUT_DIR)" | Select-Object FullName | Out-String | Write-Host }      displayName: 'Install & Build'    - task: PublishBuildArtifacts@1      inputs:        PathtoPublish: '$(System.DefaultWorkingDirectory)/$(WORKING_DIR)/$(OUTPUT_DIR)'        ArtifactName: drop        publishLocation: Container      condition: exists('$(System.DefaultWorkingDirectory)/$(WORKING_DIR)/$(OUTPUT_DIR)')      displayName: 'Publish artifact: drop (if exists)'- stage: MirrorSubset  dependsOn: Build  variables:  - group: GITHUB_MIRROR_gildihub-ui     # <-- mÃ¥ finnes i Library  jobs:  - job: mirror    steps:    - checkout: self      fetchDepth: 0    - pwsh: |        # Whitelist for UI-repo        $include = @("docs","design-tokens","storybook-static","README.md","LICENSE")        $dest = "mirror_out"        # Start pÃ¥ nytt        Remove-Item $dest -Recurse -Force -ErrorAction SilentlyContinue        New-Item -Type Directory $dest | Out-Null        $copied = 0        foreach ($p in $include) {          if (Test-Path $p) {            Copy-Item $p -Destination $dest -Recurse -Force            Write-Host " + Included: $p"            $copied++          } else {            Write-Host " - Missing (skipped): $p"          }        }        if ($copied -eq 0) {          Write-Host "No whitelisted files found â€“ skipping mirror stage."          Write-Host "##vso[task.complete result=SucceededWithIssues;]No files to mirror"          exit 0        }        Set-Location $dest        git init        git checkout -b main        git config user.name  "azdo-mirror-bot"        git config user.email "devops@gildihub.local"        git add .        git commit -m "Mirror subset (squashed): $(Build.SourceVersionMessage)"        $secureUrl = "$(GITHUB_URL)".Replace("https://","https://$(GITHUB_USER):$(GITHUB_PAT)@")        if ((git remote) -contains "github") { git remote remove github }        git remote add github $secureUrl        git push github main --force      env:        GITHUB_USER: $(GITHUB_USER)        GITHUB_PAT:  $(GITHUB_PAT)        GITHUB_URL:  $(GITHUB_URL)      displayName: 'Mirror subset â†’ GitHub (squash; safe if empty)'